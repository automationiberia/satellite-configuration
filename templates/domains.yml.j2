---
domains:
{% for domain in detailed_info.results %}
  - name: "{{ domain.json.name | trim }}"
{% if domain.json.fullname != "" %}
    description: "{{ domain.json.fullname | regex_replace('[\\r\\n\\t]+',' ') }}"
{% endif %}
{% set domain_organizations = domain.json.organizations %}
{% if domain_organizations is defined and domain_organizations[0] is defined %}
    organizations:
{% for organization in domain_organizations %}
      - "{{ organization.name }}"
{% endfor %}
{% endif %}
{% set domain_locations = domain.json.locations %}
{% if domain_locations is defined and domain_locations[0] is defined %}
    locations:
{% for location in domain_locations %}
      - "{{ location.title }}"
{% endfor %}
{% endif %}
{% set domain_parameters = domain.json.parameters %}
{% if domain_parameters != None and domain_parameters[0] is defined %}
    parameters:
{% for parameter in domain_parameters %}
      - name: "{{ parameter.name }}"
{% if parameter.parameter_type != None and parameter.parameter_type != "" %}
        parameter_type: "{{ parameter.parameter_type }}"
{% else %}
        parameter_type: "string"
{% endif %}
        value: "{{ parameter.value }}"
{% endfor %}
{% endif %}
{% endfor %}
